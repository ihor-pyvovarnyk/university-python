# Проектування REST API

Проектуючи REST API визначають: 
* сутності, що містяться в системі 
* операції, які можна виконувати над тими чи іншими сутностями
* які HTTP методи використовуються до яких операцій
* структура запитів та відповідей для тих чи інших операцій
* які HTTP статус коди повертаються в тій чи іншій ситуації
* як відбувається авторизація

Всі ці рішення документуються, щоб всі члени команди розуміли всі деталі API, яке потрібно реалізувати. Також така документація може використовуватись користувачами API щоб розуміти які операції можна виконувати, які дані передавати в запитах, які дані очікувати у відповідь і т.д.

В процесі реалізації спроектованого REST API, особливо при засосуванні методології розробки Agile, деякі його деталі можуть змінюватись, тоді документація змінюється відповідно.

REST API можна описувати різними способами, однак найпопулярнішим є стандарт [OpenAPI](https://swagger.io/specification/) (колишня Swagger Specification). OpenAPI специфікації описуються в форматі YAML або JSON.

В даній лабораторній роботі потрібно визначити як буде виглядати API системи згідно з варіантом та описати його в форматі OpenAPI версії 3.

## Варіанти

Варіант 1. Створити сервіс переказу коштів між користувачами, кожен користувач має власний гаманець та можливість переказувати чи отримувати кошти від іншого користувача. 
Варіант 2. Створити сервіс коротких (404 символи) заміток (із тегами) для кожного користувача із можливістю перегляду, редагування і видалення, а також надавати доступ редагувати замітку іншими користувачами (до 5 користувачів). Також надати можливість бачити статистику користувача, скільки повідомлень, коли редаговані і ким. 
Варіант 3. Створити сервіс оголошень + CRUD із двома рівнями повідомлень. Оголошення повинні бути локальними та публічними. Локальні оголошення тільки для користувачів, що знаходяться в тому ж місці. Публічні для всіх, навіть для не користувачів сервісу. 
Варіант 4. Створити сервіс кредитування користувачів на основі даних, що користувач вводить при реєстрації, кошти для кредитування видаються із бюджету 517 000 грн ставка 30%. Також реалізувати можливість погашення кредиту. 
Варіант 5. Написати сервіс статей (2000 символів). Статті є публічними для всіх, зареєстровані користувачі можуть редагувати статтю та очікувати на схвалення її модераторами (користувачі із більшими правами). Передбачити варіант редагування, коли стаття на розгляді модератором, а інший користувач її теж редагує. Модератори мають бачити статті, які очікують їх схвалення. 
Варіант 6. Написати сервіс простий інтернет магазин. Користувачі можуть купувати один із 8 товарів, які є в обмеженій кількості на складі, не допустити можливості продажу одного і того ж товару кільком користувачам. 
Варіант 7. Створити сервіс для резервування аудиторій на певну дату час та проміжок часу від 1 години до 5 днів. Користувачі мають можливість резервувати аудиторії, а також редагувати, скасовувати та видаляти їх. Застерегти користувачів від накладок (два користувачі не можуть зарезервувати аудиторію на певний період час) 
Варіант 8. Написати сервіс для купівлі та бронювання квитків на концерти, події і т.д. Користувачі мають можливість купувати квиток, бронювати квиток, скасовувати бронь. Унеможливити купівлю чи бронювання одного і того ж квитка кількома користувачами. 
Варіант 9. Написати сервіс для створення плейлистів. Користувач може мати як приватні (видимі тільки для нього), так і публічні (видимі для всіх) плейлисти. Публічні плейлисти можуть редагувати всі користувачі. 
Варіант 10. Створити сервіс для календаря подій. Користувач має можливість створювати подію, редагувати її, видаляти, долучати інших користувачів до події, переглядати перелік всіх створених події, та подій до яких він долучений. 
Варіант 11. Створити сервіс для проведення онлайн занять. Повинні бути користувачі двох рівнів – викладачі та учні. Викладачі можуть створювати, видаляти, редагувати курс, переглядати перелік створених курсів, долучати студентів до курсу. До курсу може бути долучено не більше 5 студентів. Студенти можуть переглядати всі дані лише тих курсів, до яких вони долучені. Також студенти можуть надсилати на участь у якомусь курсі, а викладач має можливість прийняти або відхилити запит. 
Варіант 12. Створити сервіс для збереження та редагування рейтингу студентів. Для зберігання даних про студента використовувати json. Також реалізувати можливість отримання списку кращих за рейтингом студентів. 
Варіант 13. Написати сервіс для роботи з сімейним бюджетом на спільному рахунку. В сім’ї повинно бути не менше 3 людей. Кожен користувач має можливість переглядати бюджет, додавати в нього кошти, знімати кошти на свій персональний рахунок. Також передбачити можливість збереження та виведення переліку витрат та доходів як сім’ї загалом, так і кожного її учасника. 
Варіант 14. Створити сервіс для прокату авто. Користувачі сервісу можуть бути двох рівнів – адміністратори та пасажири. Адміністратори можуть додавати та видаляти авто із системи, редагувати інформацію про авто. Пасажири можуть переглядати каталог та бронювати авто на певний час. 
Варіант 15. Написати сервіс для роботи аптеки. Провізор може додавати препарати в базу, видаляти, редагувати інформацію про них. Користувач може переглядати інформацію про препарати, здійснювати купівлю, якщо немає препарату в наявності, то його можна додати в попит. 
Варіант 16. Написати сервіс для роботи кінотеатру. Адміністратор може складати розклад показу фільмів, з урахуванням тривалості фільму та зайнятості залу, редагувати розклад, видаляти та додавати фільми. 
Варіант 17. Свій варіант (після узгодження з викладачем)

## Рекомендації

* OpenAPI специфікації досить великі за ромізром, тому для спрощення процесу створення нової API можна розпочати з прикладу специфікації "Swagger Petstore" з [Swagger Editor](https://editor.swagger.io). Даний приклад використовує специфікацію OpenAPI 2, його можна конвертувати в OpenAPI 3 засобами Swagger Editor (Editor / Convert to OpenAPI 3). Після конвертації в OpenAPI 3 даний приклад можна використати для створення власної специфікації, при цьму варто старатись обмежитись мінімально необхідною специфікацією, без копіювання непотрібних елементів з прикладу.

## Хід роботи

1. Визначити набір сутностей, що будуть в системі та описати які зв'язки будуть між ними та які операції над ними можна виконувати
2. Створити файл `swagger.yaml` з описом API у форматі OpenAPI 3
3. Перевірити валідність створеного `swagger.yaml` за допомогою [Swagger Editor](https://editor.swagger.io).

## Критерії оцінювання

1. Студент має описати словами створену специфікацію REST API
2. Файл `swagger.yaml` має містити валідний опис API в форматі OpenAPI 3
    > Перевірити валідність можна за допомогою [Swagger Editor](https://editor.swagger.io)
3. Використані коректні HTTP методи та HTTP статус коди для тих чи інших операцій
    > Перевірити у візуалізації специфікації Swagger Editor
4. Окрім опису відповіді при успішному виконання також мають описуватись відповіді при тих чи інших помилках
    > Перевірити опис відповідей при HTTP статус кодах відмінних від 200

## Виконання лабораторної роботи

Варіант 1. Створити сервіс переказу коштів між користувачами, кожен користувач має власний гаманець та можливість переказувати чи отримувати кошти від іншого користувача.

### Визначити набір сутностей

В даній системі будуть наступні сутності:
* Користувач
* Гаманець
* Транзакція

Користувач може мати кілька гаманців. Після авторизації користувачем ми можемо виконувати тільки операції над гаманцями користувача від імені якого ми авторизувались. Користувач може ініціювати транзакцію переказу грошей зі свого гаманця на будь-який інший. Тільки власник гаманця має доступ до транзакцій, що асоційовані з відповідним гаманцем.

### Створити файл `swagger.yaml`

[swagger.yaml](./swagger.yaml)
